<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stockify Soufian</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@zxing/library@latest/umd/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">
                <img src="./assets/inventory-pro-logo.png" alt="Stockify Soufian Logo">
            </div>
            <div class="loading-spinner">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
            </div>
            <h3 data-translate="loading-title">Loading Stockify Soufian</h3>
            <p id="loading-message" data-translate="loading-message">Preparing your inventory management system...</p>
        </div>
    </div>

    <!-- Authentication Modal -->
    <div id="auth-modal" class="auth-modal">
        <div class="auth-content">
            <div class="auth-header">
                <div class="auth-logo">
                    <img src="./assets/inventory-pro-logo.png" alt="Stockify Soufian Logo">
                </div>
                <h2 data-translate="secure-access">Secure Access</h2>
                <p data-translate="enter-key">Enter your access key to use Stockify Soufian</p>
            </div>
            <div class="auth-body">
                <div class="key-input-container">
                    <input type="text" id="key-input" class="key-input" data-translate="access-key" placeholder="Enter access key..." autocomplete="off" autocapitalize="off" spellcheck="false">
                    <button class="key-submit-btn" id="key-submit-btn">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
                    </button>
                </div>
                <div class="remember-me-container">
                    <label class="remember-me-label">
                        <input type="checkbox" id="remember-me-checkbox" class="remember-me-checkbox">
                        <span class="checkmark"></span>
                        <span data-translate="remember-me">Remember me on this device</span>
                    </label>
                </div>
                <div class="auth-error" id="auth-error"></div>
                <div class="auth-help">
                    <p data-translate="key-help">Contact the administrator if you need an access key</p>
                </div>
            </div>
        </div>
    </div>



    <header>
        <div class="header-content">
            <div class="app-title">
                <img src="./assets/inventory-pro-logo.png" alt="Logo" class="header-logo">
                Stockify Soufian
            </div>
</div>
    </header>

    <main>
        <div id="dashboard-view" class="view active">
            <div id="dashboard-skeleton" class="skeleton-cards">
                <div class="skeleton-card"></div>
                <div class="skeleton-card"></div>
                <div class="skeleton-card"></div>
            </div>
            <div class="dashboard-cards">
                <div class="dashboard-card" id="inventory-card">
                    <div class="card-icon">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="6"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                    </div>
                    <h3 data-translate="inventory-search">Inventory Search</h3>
                    <p data-translate="inventory-search-desc">Search and filter your inventory</p>
                    <div class="card-action">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
                    </div>
                </div>
                
                <div class="dashboard-card" id="price-check-card">
                    <div class="card-icon">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M20 10v6a2 2 0 0 1-2 2H8l-6-6V4a2 2 0 0 1 2-2h8l6 6z"/><circle cx="7.5" cy="7.5" r="1.5"/></svg>
                    </div>
                    <h3 data-translate="price-check">Price Check</h3>
                    <p data-translate="price-check-desc">Check product prices</p>
                    <div class="card-action">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
                    </div>
                </div>
                
                <div class="dashboard-card" id="supplier-card">
                    <div class="card-icon">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><rect x="1" y="3" width="15" height="13"/><polyline points="16 8 20 8 23 11 23 16 16 16"/><circle cx="6" cy="19" r="1"/><circle cx="18" cy="19" r="1"/></svg>
                    </div>
                    <h3 data-translate="supplier-search">Supplier Search</h3>
                    <p data-translate="supplier-search-desc">Find supplier information</p>
                    <div class="card-action">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
                    </div>
                </div>
                
                <div class="dashboard-card" id="stocktaking-card">
                    <div class="card-icon">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M9 2h6v2h3v18H6V4h3V2z"/><line x1="9" y1="8" x2="15" y2="8"/><line x1="9" y1="12" x2="15" y2="12"/><line x1="9" y1="16" x2="15" y2="16"/></svg>
                    </div>
                    <h3 data-translate="digital-stocktaking">Digital Stocktaking</h3>
                    <p data-translate="digital-stocktaking-desc">Manage your stocktaking sessions</p>
                    <div class="card-action">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
                    </div>
                </div>

                <div class="dashboard-card" id="pricing-labels-card">
                    <div class="card-icon">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><rect x="6" y="9" width="12" height="8"/><path d="M6 18v3h12v-3"/><path d="M6 9V6h12v3"/></svg>
                    </div>
                    <h3 data-translate="pricing-labels">Pricing Labels</h3>
                    <p data-translate="pricing-labels-desc">Generate pricing labels</p>
                    <div class="card-action">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
                    </div>
                </div>
                
                <div class="dashboard-card" id="statistic-card">
                    <div class="card-icon">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><rect x="3" y="3" width="4" height="18"/><rect x="10" y="10" width="4" height="11"/><rect x="17" y="14" width="4" height="7"/></svg>
                    </div>
                    <h3 data-translate="statistics">Statistics</h3>
                    <p data-translate="statistics-desc">View inventory analytics</p>
                    <div class="card-action">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
                    </div>
                </div>
            </div>
        </div>

        <div id="price-check-view" class="view">
            <div class="section-header">
                <h2 data-translate="price-check">Price Check</h2>
                <p data-translate="price-check-desc">Check product prices</p>
            </div>
            <div class="search-container">
                <input type="text" id="price-search" data-translate="search-placeholder" placeholder="Search products...">
                <button id="price-barcode-btn" class="barcode-btn" data-translate="scan-barcode" title="Scan Barcode">
                    <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><rect x="2" y="4" width="2" height="16"/><rect x="6" y="4" width="1" height="16"/><rect x="9" y="4" width="2" height="16"/><rect x="13" y="4" width="1" height="16"/><rect x="16" y="4" width="2" height="16"/><rect x="20" y="4" width="1" height="16"/></svg>
                </button>
                <button id="price-search-btn">
                    <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="6"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg> <span data-translate="search">Search</span>
                </button>
            </div>
            <div id="price-result" class="result-popup">
                </div>
        </div>

        <div id="supplier-view" class="view">
            <div class="section-header">
                <h2 data-translate="supplier-search">Supplier Search</h2>
                <p data-translate="supplier-search-desc">Find supplier information</p>
            </div>
            <div class="search-container">
                <input type="text" id="supplier-search" data-translate="search-placeholder" placeholder="Search products...">
                <button id="supplier-barcode-btn" class="barcode-btn" data-translate="scan-barcode" title="Scan Barcode">
                    <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><rect x="2" y="4" width="2" height="16"/><rect x="6" y="4" width="1" height="16"/><rect x="9" y="4" width="2" height="16"/><rect x="13" y="4" width="1" height="16"/><rect x="16" y="4" width="2" height="16"/><rect x="20" y="4" width="1" height="16"/></svg>
                </button>
                <button id="supplier-search-btn">
                    <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="6"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg> <span data-translate="search">Search</span>
                </button>
            </div>
            <div id="supplier-result" class="result-popup">
                </div>
            <div id="supplier-suggestions" class="supplier-suggestions-section">
                </div>
        </div>

        <div id="inventory-view" class="view">
            <div class="section-header">
                <h2 data-translate="inventory-search">Inventory Search</h2>
                <p data-translate="inventory-search-desc">Search and filter your inventory</p>
            </div>
            <div class="search-container">
                <input type="text" id="inventory-search" data-translate="search-placeholder" placeholder="Search products...">
                <button id="inventory-barcode-btn" class="barcode-btn" data-translate="scan-barcode" title="Scan Barcode">
                    <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><rect x="2" y="4" width="2" height="16"/><rect x="6" y="4" width="1" height="16"/><rect x="9" y="4" width="2" height="16"/><rect x="13" y="4" width="1" height="16"/><rect x="16" y="4" width="2" height="16"/><rect x="20" y="4" width="1" height="16"/></svg>
                </button>
                <button id="inventory-search-btn">
                    <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="6"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg> <span data-translate="search">Search</span>
                </button>
            </div>
            <div class="filter-container">
                <select id="category-filter">
                    <option value="" data-translate="all-categories">All Categories</option>
                </select>
                
                <select id="stock-filter">
                    <option value="" data-translate="all-stock-levels">All Stock Levels</option>
                    <option value="in-stock" data-translate="in-stock">In Stock</option>
                    <option value="out-of-stock" data-translate="out-of-stock">Out of Stock</option>
                    <option value="custom-range" data-translate="custom-range">Custom Range</option>
                </select>
                
                <div id="stock-range-inputs" class="range-inputs" style="display: none;">
                    <input type="number" id="stock-min" data-translate="min" placeholder="Min" min="0">
                    <span data-translate="to">to</span>
                    <input type="number" id="stock-max" data-translate="max" placeholder="Max" min="0">
                </div>
                
                <div class="price-filter-container">
                    <label>
                        <input type="checkbox" id="price-filter-toggle"> <span data-translate="price-filter">Price Filter</span>
                    </label>
                    <div id="price-range-inputs" class="range-inputs" style="display: none;">
                        <input type="number" id="price-min" data-translate="from" placeholder="From" min="0" step="0.01">
                        <span data-translate="mad-to">MAD to</span>
                        <input type="number" id="price-max" data-translate="to" placeholder="To" min="0" step="0.01">
                        <span data-translate="mad">MAD</span>
                    </div>
                </div>
            </div>
            <div id="inventory-results" class="inventory-results">
                </div>
        </div>

        <div id="statistic-view" class="view">
            <div class="section-header">
                <h2 data-translate="statistics">Statistics</h2>
                <p data-translate="statistics-desc">View inventory analytics</p>
            </div>
            <div id="stats-skeleton" class="skeleton-stats">
                    <div class="skeleton-stat"></div>
                    <div class="skeleton-stat"></div>
                    <div class="skeleton-stat"></div>
                    <div class="skeleton-stat"></div>
                    <div class="skeleton-stat"></div>
                    <div class="skeleton-stat"></div>
                </div>
                <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-icon">
                        
                    <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg></div>
                    <div class="stat-info">
                        <h3 id="total-products">0</h3>
                        <p data-translate="total-products">Total Products</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        
                    <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="8" cy="15" r="3"/><circle cx="16" cy="9" r="3"/><path d="M11 15h5"/><path d="M5 9h5"/></svg></div>
                    <div class="stat-info">
                        <h3 id="total-value">0 MAD</h3>
                        <p data-translate="total-value">Total Value</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        
                    <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3l10 18H2L12 3z"/><line x1="12" y1="9" x2="12" y2="14"/><circle cx="12" cy="18" r="1"/></svg></div>
                    <div class="stat-info">
                        <h3 id="low-stock-items">0</h3>
                        <p data-translate="low-stock-items">Low Stock Items</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        
                    <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 21h8l-1-6h-6l-1 6z"/><path d="M7 7h10l-2 8H9L7 7z"/><path d="M9 4h6"/></svg></div>
                    <div class="stat-info">
                        <h3 id="top-product">N/A</h3>
                        <p data-translate="top-product">Top Product</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        
                    <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><rect x="3" y="4" width="7" height="7"/><rect x="14" y="4" width="7" height="7"/><rect x="3" y="13" width="7" height="7"/><rect x="14" y="13" width="7" height="7"/></svg></div>
                    <div class="stat-info">
                        <h3 id="total-categories">0</h3>
                        <p data-translate="categories">Categories</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        
                    <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M20 12l-4 4-6-6-6 6"/><path d="M15 3h6v6"/></svg></div>
                    <div class="stat-info">
                        <h3 id="average-price">0 MAD</h3>
                        <p data-translate="average-price">Average Price</p>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="charts-section">
                <h3 data-translate="visual-analytics">Visual Analytics</h3>
                <div class="charts-grid">
                    <!-- Category Distribution Chart -->
                    <div class="chart-container">
                        <div class="chart-header">
                            <h4> <span data-translate="category-distribution">Category Distribution</span></h4>
                            <p data-translate="products-by-category">Products by category</p>
                        </div>
                        <div class="chart-content">
                            <canvas id="category-chart" width="300" height="200"></canvas>
                        </div>
                    </div>

                    <!-- Stock Level Chart -->
                    <div class="chart-container">
                        <div class="chart-header">
                            <h4><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><rect x="3" y="3" width="4" height="18"/><rect x="10" y="10" width="4" height="11"/><rect x="17" y="14" width="4" height="7"/></svg> <span data-translate="stock-levels">Stock Levels</span></h4>
                            <p data-translate="stock-distribution-overview">Stock distribution overview</p>
                        </div>
                        <div class="chart-content">
                            <canvas id="stock-chart" width="300" height="200"></canvas>
                        </div>
                    </div>

                    <!-- Value Distribution Chart -->
                    <div class="chart-container">
                        <div class="chart-header">
                            <h4> <span data-translate="value-distribution">Value Distribution</span></h4>
                            <p data-translate="top-categories-by-value">Top categories by value</p>
                        </div>
                        <div class="chart-content">
                            <canvas id="value-chart" width="300" height="200"></canvas>
                        </div>
                    </div>

                    <!-- Supplier Distribution Chart -->
                    <div class="chart-container">
                        <div class="chart-header">
                            <h4> <span data-translate="top-suppliers">Top Suppliers</span></h4>
                            <p data-translate="products-by-supplier">Products by supplier</p>
                        </div>
                        <div class="chart-content">
                            <canvas id="supplier-chart" width="300" height="200"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="upload-view" class="view">
            <div class="section-header">
                <h2 data-translate="upload-new-data">Upload New Data</h2>
                <p data-translate="upload-desc">Clear existing data and upload a new Excel file</p>
            </div>
            <div class="upload-container">
                <div class="drop-area" id="drop-area">
                    <div class="upload-icon">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M16 16v-4h3L12 3 5 12h3v4h8z"/><path d="M5 18h14a2 2 0 0 1 0 4H5a2 2 0 0 1 0-4z" opacity="0.15"/></svg>
                    </div>
                    <h3 data-translate="drag-drop-excel">Drag & Drop Excel File</h3>
                    <p data-translate="or">or</p>
                    <button class="browse-btn" id="browse-btn">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M2 7h5l2 3h13v9H2z"/><path d="M2 7V5a2 2 0 0 1 2-2h5l2 3h11"/></svg>
                        <span data-translate="browse-files">Browse Files</span>
                    </button>
                    <input type="file" id="excel-upload" accept=".xlsx,.xls" style="display: none;">
                </div>
                <div class="upload-status" id="upload-status"></div>
            </div>
        </div>

        <div id="about-view" class="view">
            <div class="section-header">
                <h2 data-translate="about">About</h2>
                <p data-translate="about-desc">The definitive solution for modern inventory management.</p>
            </div>
            <div class="content-card">
                <div class="about-logo">
                    <img src="./assets/inventory-pro-logo.png" alt="Stockify Soufian Logo">
                </div>
                <p data-translate="about-text-1">Welcome to Stockify Soufian, the definitive solution for modern inventory management. In today's fast-paced business environment, efficient inventory control is not just an advantageâ€”it's a necessity. Stockify Soufian is meticulously crafted to empower businesses and individuals with unparalleled speed and simplicity in managing their product assets.</p>
                <p data-translate="about-text-2">Developed by Soufian, this Progressive Web App (PWA) is engineered from the ground up to provide a seamless and intuitive experience. Our core mission is to transform the often-complex task of inventory lookup and management into a fast, effortless, and highly accurate process. We understand that time is a valuable commodity, and every second saved in inventory operations translates directly into enhanced productivity and profitability.</p>
                <p data-translate="about-text-3">Stockify Soufian stands out through its commitment to user-centric design and robust functionality. Whether you are a small business owner meticulously tracking every item, or a large enterprise seeking to streamline extensive product databases, our app adapts to your needs. Its progressive web app architecture ensures that you can access your inventory data anytime, anywhere, and on any device, with or without an internet connection, delivering a truly responsive and reliable experience.</p>
                <p data-translate="key-features-intro">Key features are integrated to ensure comprehensive control and real-time insights:</p>
                <ul>
                    <li> <span data-translate="feature-1">Lightning-Fast Inventory Lookup</span></li>
                    <li> <span data-translate="feature-2">Effortless Stock Management</span></li>
                    <li> <span data-translate="feature-3">Intuitive Barcode Scanning</span></li>
                    <li> <span data-translate="feature-4">Digital Stocktaking Capabilities</span></li>
                    <li> <span data-translate="feature-5">Dynamic Reporting & Statistics</span></li>
                    <li> <span data-translate="feature-6">Seamless Data Synchronization</span></li>
                </ul>
                <p data-translate="about-text-4">Stockify Soufian is more than just an app; it's your dedicated partner in achieving optimal inventory efficiency. We are committed to continuous improvement, ensuring that Stockify Soufian remains at the forefront of inventory management technology, always evolving to meet the dynamic demands of your business. Experience the future of inventory controlâ€”simple, fast, and precise.</p>
                <p data-translate="version">Version: 1.0.0</p>
                <p data-translate="developed-by">Developed by: Soufian</p>
            </div>
        </div>

        <div id="contact-view" class="view">
            <div class="section-header">
                <h2 data-translate="contact">Contact</h2>
                <p data-translate="contact-desc">We'd love to hear from you!</p>
            </div>
            
            <div class="contact-actions">
                <a class="contact-action" href="mailto:achsoufiannn@gmail.com">
                    <span class="ca-svg" aria-hidden="true">
                        <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16v16H4z"/><polyline points="22,6 12,13 2,6"/></svg>
                    </span>
                    <span>Email</span>
                </a>
                <a class="contact-action" href="tel:+212771599165">
                    <span class="ca-svg" aria-hidden="true">
                        <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2A19.7 19.7 0 0 1 3.11 5.18 2 2 0 0 1 5 3h3a2 2 0 0 1 2 1.72c.12.89.31 1.76.57 2.6a2 2 0 0 1-.45 2.11L9.1 11.1a16 16 0 0 0 3.9 3.9l1.67-1.02a2 2 0 0 1 2.11-.45c.84.26 1.71.45 2.6.57A2 2 0 0 1 22 16.92z"/></svg>
                    </span>
                    <span>Call</span>
                </a>
                <a class="contact-action" href="https://wa.me/message/NDCKO43F45GGD1" target="_blank">
                    <span class="ca-svg" aria-hidden="true">
                        <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 11.5A8.5 8.5 0 1 1 11.5 3 8.5 8.5 0 0 1 20 11.5Z"/><path d="M7.5 18l-1 3 3-1A8.5 8.5 0 1 0 7.5 18Z"/><path d="M8.5 10.5s.5 2 3 3 3 0 3 0"/></svg>
                    </span>
                    <span>WhatsApp</span>
                </a>
                <a class="contact-action" href="https://www.instagram.com/justs_oufian" target="_blank">
                    <span class="ca-svg" aria-hidden="true">
                        <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="4"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37Z"/><circle cx="17.5" cy="6.5" r="1.5"/></svg>
                    </span>
                    <span>Instagram</span>
                </a>
            </div></div>

    
        <!-- Settings view (moved from sidebar) -->
        <div id="settings-view" class="view">
            <div class="section-header">
                <h2 data-translate="settings">Settings</h2>
            </div>
            <div class="settings-content" style="padding:1rem;">

                <div class="settings-card upload-card" id="sidebar-upload-item" role="button" tabindex="0" aria-label="Upload New Data">
                    <div class="card-left"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M16 16v-4h3L12 3 5 12h3v4h8z"/><path d="M5 18h14a2 2 0 0 1 0 4H5a2 2 0 0 1 0-4z" opacity="0.15"/></svg></div>
                    <div class="card-body">
                        <h3 data-translate="upload-new-data">Upload New Data</h3>
                        <p data-translate="upload-desc">Clear existing data and upload a new Excel file</p>
                    </div>
                    <div class="card-action"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg></div>
                </div>
                <div class="settings-row">
                    <div class="sidebar-item">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
                        <span data-translate="dark-mode">Dark Mode</span>
                        <label class="switch">
                            <input type="checkbox" id="dark-mode-toggle">
                            <span class="slider round"></span>
                        </label>
                    </div>
                </div>
                <div class="settings-row" style="margin-top:.8rem;">
                    <div class="sidebar-item">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M2 12h20"/><path d="M12 2a15 15 0 0 1 4 10 15 15 0 0 1-4 10 15 15 0 0 1-4-10 15 15 0 0 1 4-10z"/></svg>
                        <span data-translate="language">Language</span>
                        <div class="language-selector" style="display:inline-flex; gap:0.5rem; margin-left:0.5rem;">
                            <button id="lang-en" class="lang-btn active">EN</button>
                            <button id="lang-fr" class="lang-btn">FR</button>
                        </div>
                    </div>
                </div>
                <div style="margin-top:1rem;">
                    <div class="sidebar-item" id="sidebar-about-item">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
                        <span data-translate="about">About</span>
                    </div>
                    <div class="sidebar-item" id="sidebar-contact-item" style="margin-top:.5rem;">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 8l9 6 9-6"/><rect x="3" y="5" width="18" height="14" rx="2"/></svg>
                        <span data-translate="contact">Contact</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <button id="back-btn" class="back-btn">
        
    <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M15 18l-6-6 6-6"/><path d="M21 12H9"/></svg></button>

    <div id="pricing-labels-modal" class="modal-view">
        <div class="modal-view-content">
            <div class="modal-view-header">
                <button id="close-pricing-labels" class="close-btn"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M15 18l-6-6 6-6"/><path d="M21 12H9"/></svg></button>
                <h2 data-translate="pricing-labels">Pricing Labels</h2>
                <button id="pricing-labels-menu-btn" class="menu-btn"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="5" cy="12" r="1.5"/><circle cx="12" cy="12" r="1.5"/><circle cx="19" cy="12" r="1.5"/></svg></button>
                <div id="pricing-labels-menu" class="stocktaking-menu">
                    <button id="rename-labels-session-btn" class="menu-item"><span data-translate="rename-session">Rename Session</span></button>
                    <button id="start-new-labels-session-btn" class="menu-item"><span data-translate="start-new">Start New</span></button>
                    <button id="view-labels-archive-btn" class="menu-item"><span data-translate="view-archive">View Archive</span></button>
                    <button id="delete-labels-session-btn" class="menu-item"><span data-translate="delete">Delete</span></button>
                </div>
            </div>
            <div class="modal-view-body">
                <div class="scan-section">
                    <div class="scan-icon"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><rect x="2" y="4" width="2" height="16"/><rect x="6" y="4" width="1" height="16"/><rect x="9" y="4" width="2" height="16"/><rect x="13" y="4" width="1" height="16"/><rect x="16" y="4" width="2" height="16"/><rect x="20" y="4" width="1" height="16"/></svg></div>
                    <h3 data-translate="ready-to-scan-labels">Ready to Scan Labels</h3>
                    <p data-translate="scan-barcodes-continuously">Scan barcodes continuously or use manual entry.</p>
                    <div class="scan-buttons">
                        <button id="start-labels-scan-btn" class="scan-btn primary"> <span data-translate="start-scan">Start Scan</span></button>
                        <button id="manual-label-entry-btn" class="scan-btn secondary"> <span data-translate="manual-entry">Manual Entry</span></button>
                    </div>
                </div>
                <div class="scanned-items-section">
                    <h4 data-translate="scanned-barcodes">Scanned Barcodes</h4> (<span id="labels-count">0</span>)
                    <div id="pricing-labels-list" class="session-list">
                        <div class="empty-session">
                            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><rect x="6" y="9" width="12" height="8"/><path d="M6 18v3h12v-3"/><path d="M6 9V6h12v3"/></svg>
                            <p data-translate="no-barcodes-scanned">No barcodes scanned yet</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="pricing-labels-actions" class="fab-container">
                <button id="share-labels-btn" class="fab"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><path d="M8.8 13.5l6.4 3.7"/><path d="M15.2 6.8L8.8 10.5"/></svg></button>
                <button id="export-labels-excel-btn" class="fab secondary"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3v12"/><path d="M8 11l4 4 4-4"/><rect x="3" y="17" width="18" height="4"/></svg></button>
            </div>
        </div>
    </div>


    <div id="stocktaking-modal" class="modal-view">
        <div class="modal-view-content">
            <div class="stocktaking-header">
                <button id="close-stocktaking" class="close-btn"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M15 18l-6-6 6-6"/><path d="M21 12H9"/></svg></button>
                <h2 id="season-display-name" data-translate="new-season">New Season</h2>
                <button id="stocktaking-menu-btn" class="menu-btn"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="5" cy="12" r="1.5"/><circle cx="12" cy="12" r="1.5"/><circle cx="19" cy="12" r="1.5"/></svg></button>
                <div id="stocktaking-menu" class="stocktaking-menu">
                    <button id="rename-season-btn" class="menu-item"><span data-translate="rename-season">Rename Season</span></button>
                    <button id="start-new-season-btn" class="menu-item"><span data-translate="start-new">Start New</span></button>
                    <button id="view-archive-btn" class="menu-item"><span data-translate="view-archive">View Archive</span></button>
                    <button id="delete-season-btn" class="menu-item"><span data-translate="delete">Delete</span></button>
                </div>
            </div>

            <div class="stocktaking-content">
                <div class="season-info">
                    <h3 id="season-name-display" data-translate="new-season">New Season</h3>
                    <p id="season-date" data-translate="started-today">Started today</p>
                    <div class="season-status"><span class="status-indicator active">ðŸŸ¢ <span data-translate="active">Active</span></span></div>
                </div>

                <div class="scan-section">
                    <div class="scan-icon"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><rect x="2" y="4" width="2" height="16"/><rect x="6" y="4" width="1" height="16"/><rect x="9" y="4" width="2" height="16"/><rect x="13" y="4" width="1" height="16"/><rect x="16" y="4" width="2" height="16"/><rect x="20" y="4" width="1" height="16"/></svg></div>
                    <h3 data-translate="ready-to-scan">Ready to Scan</h3>
                    <p data-translate="tap-scan-button">Tap the scan button or use manual entry</p>
                    <div class="scan-buttons">
                        <button id="start-scan-btn" class="scan-btn primary"> <span data-translate="start-scan">Start Scan</span></button>
                        <button id="manual-entry-btn" class="scan-btn secondary"> <span data-translate="manual-entry">Manual Entry</span></button>
                    </div>
                </div>

                <div class="session-stats">
                    <div class="stat-item">
                        <span class="stat-label" data-translate="items-scanned">Items Scanned:</span>
                        <span class="stat-value" id="items-count">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label" data-translate="total-quantity">Total Quantity:</span>
                        <span class="stat-value" id="total-quantity">0</span>
                    </div>
                </div>

                <div class="scanned-items-section">
                    <h4 data-translate="scanned-items">Scanned Items</h4>
                    <div id="session-list" class="session-list">
                        <div class="empty-session">
                            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M9 2h6v2h3v18H6V4h3V2z"/><line x1="9" y1="8" x2="15" y2="8"/><line x1="9" y1="12" x2="15" y2="12"/><line x1="9" y1="16" x2="15" y2="16"/></svg>
                            <p data-translate="no-items-scanned">No items scanned yet</p>
                        </div>
                    </div>
                </div>

                <div class="season-archive-section">
                    <h4 data-translate="season-archive">Season Archive</h4>
                    <div id="archive-preview" class="archive-preview">
                        <p data-translate="no-archived-seasons">No archived seasons yet</p>
                    </div>
                </div>
            </div>

            <div class="stocktaking-actions">
                <button id="export-season-btn" class="fab"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><path d="M8.8 13.5l6.4 3.7"/><path d="M15.2 6.8L8.8 10.5"/></svg></button>
                <button id="export-season-excel-btn" class="fab secondary"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3v12"/><path d="M8 11l4 4 4-4"/><rect x="3" y="17" width="18" height="4"/></svg></button>
            </div>
        </div>
    </div>

    <div id="scanner-modal" class="scanner-modal">
        <div class="scanner-header">
            <button id="close-scanner" class="scanner-close-btn"></button>
            <h3 data-translate="barcode-scanner">Barcode Scanner</h3>
            <div class="scanner-actions">
                <button id="gallery-btn" class="scanner-action-btn"></button>
                <button id="search-btn" class="scanner-action-btn"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="6"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg></button>
                <button id="flashlight-btn" class="scanner-action-btn"></button>
            </div>
        </div>
        
        <div class="scanner-viewport">
            <video id="scanner-video" autoplay playsinline></video>
            <div class="scanner-overlay">
                <div class="scanner-frame">
                    <div class="scanner-corners">
                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                    <div class="scanner-line"></div>
                </div>
            </div>
        </div>
        
        <div class="scanner-message">
            <p id="scanner-status" data-translate="position-barcode">Position the barcode within the frame</p>
        </div>
        
        <input type="file" id="gallery-input" accept="image/*" style="display: none;">
    </div>

    <!-- Custom Manual Entry Modal -->
    <div id="custom-manual-entry-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-translate="manual-barcode-entry">Manual Barcode Entry</h3>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="manual-barcode-input" data-translate="enter-barcode-manually">Enter barcode manually:</label>
                    <input type="text" id="manual-barcode-input" data-translate="barcode" placeholder="Barcode">
                </div>
            </div>
            <div class="modal-footer">
                <button id="manual-entry-cancel-btn" class="btn btn-secondary">
                    
                    <span data-translate="cancel">Cancel</span>
                </button>
                <button id="manual-entry-ok-btn" class="btn btn-primary">
                    
                    <span data-translate="ok">OK</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Custom Name Edit Modal -->
    <div id="custom-name-edit-modal" class="custom-modal">
        <div class="custom-modal-overlay"></div>
        <div class="custom-modal-content">
            <div class="custom-modal-header">
                <div class="custom-modal-icon">
                    
                </div>
                <h3 id="custom-modal-title" data-translate="enter-new-name">Enter new name:</h3>
            </div>
            <div class="custom-modal-body">
                <div class="custom-input-group">
                    <input type="text" id="custom-name-input" data-translate="enter-name" placeholder="Enter name">
                    <div class="custom-input-underline"></div>
                </div>
            </div>
            <div class="custom-modal-footer">
                <button id="custom-name-cancel-btn" class="custom-btn custom-btn-secondary" data-translate="cancel">
                    Cancel
                </button>
                <button id="custom-name-ok-btn" class="custom-btn custom-btn-primary" data-translate="ok">
                    OK
                </button>
            </div>
        </div>
    </div>

    <!-- Custom Confirmation Modal -->
    <div id="custom-confirmation-modal" class="custom-modal">
        <div class="custom-modal-overlay"></div>
        <div class="custom-modal-content">
            <div class="custom-modal-header">
                <div class="custom-modal-icon" id="confirmation-modal-icon">
                    
                </div>
                <h3 id="confirmation-modal-title" data-translate="confirm-action">Confirm Action</h3>
            </div>
            <div class="custom-modal-body">
                <div class="confirmation-message">
                    <p id="confirmation-modal-message" data-translate="are-you-sure">Are you sure you want to proceed?</p>
                </div>
            </div>
            <div class="custom-modal-footer">
                <button id="confirmation-cancel-btn" class="custom-btn custom-btn-secondary" data-translate="cancel">
                    Cancel
                </button>
                <button id="confirmation-ok-btn" class="custom-btn custom-btn-danger" data-translate="confirm">
                    Confirm
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Register service worker
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("service-worker.js");
        }
    </script>

  <!-- Bottom Navigation Bar -->
  <nav id="bottom-nav" class="bottom-nav" aria-label="Primary">
    <button class="nav-btn nav-active" data-target="dashboard-view" aria-label="Home">
      <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><path d="M3 11.5L12 4l9 7.5v7a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1v-7z"/></svg>
      <span>Home</span>
    </button>
    <button class="nav-btn" data-target="inventory-view" aria-label="Inventory Search">
      <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="7"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
      <span>Inventory</span>
    </button>
    <button class="nav-btn" data-target="price-check-view" aria-label="Price Check">
      <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><path d="M3 7h6l3-3 3 3h6v11a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7z"/><path d="M8 14h8M8 10h8"/></svg>
      <span>Price</span>
    </button>
    <button class="nav-btn" data-target="settings-view" aria-label="Settings">
      <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06A2 2 0 1 1 2.28 18.9l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82L4.27 6.7A2 2 0 1 1 7.1 3.87l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 1 1 4 0v.09c0 .58.36 1.1.93 1.35h.02a1.65 1.65 0 0 0 1.51-.33l.06-.06A2 2 0 1 1 21.72 5.1l-.06.06a1.65 1.65 0 0 0-.33 1.82V9c.25.57.77.93 1.35.93H21a2 2 0 1 1 0 4h-.09c-.58 0-1.1.36-1.35.93z"/></svg>
      <span>Settings</span>
    </button>
  </nav>
  <!-- end bottom nav -->

</body>
</html>

